jQuery(document).ready(function(e){function n(){var n=e("#post").serializeObject();if(n.enable=e("#clever-mega-menu-item-enable").prop("checked")?"1":"0",void 0!==typeof i.clever_menu_editing&&"customize"===i.clever_menu_editing){var t=i.vc_current_control.setting();t=_.clone(t),t.clever_menu_data=n,i.vc_current_control.setting.set(t),"1"===n.enable?i.vc_current_control.container.addClass("clever-mega-menu-item-mega-enabled"):i.vc_current_control.container.removeClass("clever-mega-menu-item-mega-enabled"),i.vc_current_item_panel.addClass("clever-mega-menu-customize-hide-vc"),i.wp.customize.previewer.refresh()}else n.action="save_clever_menu_item",e.ajax({url:ajaxurl,data:n,method:"POST",dataType:"html"}).done(function(e){i.clever_menu_data_item_changes(n,JSON.parse(e))}).fail(function(e){console.log(e)})}var t=e(e("#clever-mega-menu-item-settings").html()),c=e(e("#clever-mega-menu-item-settings-tabs").html()),a=e("#clever-enable-mega-menu-switch").html();if(e("#wpb-edit-inline").remove(),e(".vc_show-mobile.vc_pull-right").remove(),e("#vc_fullscreen-button").parent().remove(),e("#vc_post-custom-css").val(cleverMenuItem.style),e("#vc_ui-panel-post-settings .vc_ui-panel-header-heading").html(cleverMenuI18n.megaSettings),e("#vc_ui-panel-post-settings .vc_description").text(cleverMenuI18n.megaCssDesc),e('<div id="clever-mega-menu-item-header-bar"><ul class="clever-mega-menu-item-controls"><li><a id="clever-mega-menu-close-vc-box" href="#" class="vc_icon-btn vc_back-button" title="'+cleverMenuI18n.close+'"><i class="vc-composer-icon vc-c-icon-close"></i></a></li><li><a id="clever-mega-menu-save-item-settings-btn" class="" href="#">'+cleverMenuI18n.saveAll+"</a></li></ul></div>").insertBefore("#wpb_visual_composer div.inside"),e("#clever-mega-menu-close-vc-box").on("click",function(e){e.preventDefault(),i.clever_menu_close_vc_popup()}),a&&e("ul.vc_navbar-nav").append('<li class="vc-show-whatever vc_pull-right clever-mega-menu-toggle-btn"><span>'+cleverMenuI18n.enableMega+"</span>"+a+"</li>"),t&&t.insertBefore(e("#visual_composer_content")),c.insertBefore(e("#wpb_visual_composer div.inside")),e(".clever-mega-menu-item-setting-tab").on("click",function(){var n=e(this);e(".clever-mega-menu-item-setting-tab").removeClass("active-item-setting-tab"),n.addClass("active-item-setting-tab"),n.hasClass("clever-mega-menu-to-design")?(e("#vc_navbar").hide(),e("#vc_no-content-helper").hide(),e("#visual_composer_content").hide(),e(".clever-mega-menu-tab-settings",t).hide(),e(".clever-mega-menu-tab-icons",t).hide(),e(".clever-mega-menu-tab-design",t).show()):n.hasClass("clever-mega-menu-to-settings")?(e("#vc_navbar").hide(),e("#vc_no-content-helper").hide(),e("#visual_composer_content").hide(),e(".clever-mega-menu-tab-design",t).hide(),e(".clever-mega-menu-tab-icons",t).hide(),e(".clever-mega-menu-tab-settings",t).show()):n.hasClass("clever-mega-menu-to-icons")?(e("#vc_navbar").hide(),e("#vc_no-content-helper").hide(),e("#visual_composer_content").hide(),e(".clever-mega-menu-tab-design",t).hide(),e(".clever-mega-menu-tab-settings",t).hide(),e(".clever-mega-menu-tab-icons",t).show()):(e(".clever-mega-menu-tab-icons",t).hide(),e(".clever-mega-menu-tab-design",t).hide(),e(".clever-mega-menu-tab-settings",t).hide(),e("#visual_composer_content").show(),e("#vc_no-content-helper").show(),e("#vc_navbar").show())}),clever_setting_fields(t),e(".clever-mega-menu-loading").remove(),"undefined"!=typeof vc){Shortcodes=vc.shortcodes;var i=window.parent||window.top;self!==i&&(void 0!==i.clever_menu_editing&&"customize"===i.clever_menu_editing&&e(".vc_btn-sm",void 0).html(cleverMenuI18n.save),e("<h1>"+i.clever_mega_menu_item_title+"</h1>").insertBefore("#clever-mega-menu-item-header-bar .clever-mega-menu-item-controls"),e("#clever-mega-menu-save-item-settings-btn").on("click",function(e){return e.preventDefault(),n(),!1})),"undefined"!=typeof Shortcodes&&Shortcodes.on("sync",function(n){_.each(Shortcodes.models,function(n){void 0!==n.view&&e(".content a",n.view.$el).attr("target","_blank")})})}e(".clever-mega-menu-icons-tabs").length&&e(".clever-mega-menu-icons-tabs").each(function(){var n=e(this).parent(),t=e(this).find(".clever-mega-menu-icons-tab"),c=e(this).find(".clever-mega-menu-icons-tab.active").data("tab"),a=e(this).parent().find(".clever-mega-menu-icons-tab-content");a.hide(),n.find("#"+c).show(),t.on("click",function(i){i.preventDefault(),t.removeClass("active"),e(this).addClass("active"),c=e(this).data("tab"),a.hide(),n.find("#"+c).show()})})});