window.clever_mega_menu_item_title='',window.currentEditItem={};function clever_menu_close_vc_popup(){jQuery('.clever-mega-menu-popup').hide(),jQuery('#clever-mega-menu-overlay').hide(),jQuery('.clever-mega-menu-customize-vc-iframe-wrapper',jQuery('body')).length&&jQuery('.clever-mega-menu-customize-vc-iframe-wrapper',jQuery('body')).removeClass('clever-mega-menu-customize-show-vc').addClass('clever-mega-menu-customize-hide-vc')}function clever_menu_upload_media(a,b,d,f,g){var j,k=jQuery(a+' .clever-mega-menu-upload-image'),l=jQuery(a+' .clever-mega-menu-hidden-upload-image-value'),m=jQuery(a+' .clever-mega-menu-upload-btn');k.attr('src')&&m.html('<span class="dashicons dashicons-admin-media"></span>'+b),m.click(function(n){return n.preventDefault(),j?(j.open(),!1):void(j=wp.media({title:d,button:{text:f},multiple:g}),j.on('select',function(){var o=j.state().get('selection').first().toJSON(),p={alt:o.alt,src:o.url,width:o.width,height:o.height,orientation:o.orientation};k.attr('alt',o.alt),k.attr('src',o.url),k.attr('width',o.width),k.attr('height',o.height),k.attr('data-orientation',o.orientation),l.val(JSON.stringify(p))}),j.open())})}function clever_menu_toggle_fields(a,b,d,f){var g=a.val();return g===f?(d.hide(),b.show()):(b.hide(),d.show()),!1}function clever_menu_insert_iconic_value(a,b){return jQuery(a).on('click',function(){var d,f;f=jQuery(this),c=f.parent('label'),d=f.next(b,c),d.toggle('fast'),jQuery(jQuery(b+' span'),c).on('click',function(){var g=jQuery(this,c).attr('class');c.find('.clever-mega-menu-icon').attr('class','clever-mega-menu-icon '+g),c.find('input').val(g),d.hide('fast')})}),!1}jQuery(document).ready(function(a){a('.clever-mega-menu-admin .cmm-color-picker').spectrum({preferredFormat:'rgb',showInput:!0,showAlpha:!0}),clever_menu_insert_iconic_value('.clever-mega-menu-icon','.clever-mega-menu-icons'),clever_menu_upload_media('#clever-mega-menu-logo-image',cleverMenuI18n.change,cleverMenuI18n.selectOrUpload,cleverMenuI18n.insert,!1),a(function(){var b=a('.clever-mega-menu-item-icon'),d=a('.clever-mega-menu-item-edit-btn'),f=a('#clever-mega-menu-enable-checkbox'),g=a('.clever-mega-menu-advanced-setting');f.is(':checked')?(d.addClass('clever-mega-menu-active-edit-btn'),b.show(),g.show()):(d.removeClass('clever-mega-menu-active-edit-btn'),b.hide(),g.hide()),f.change(function(){f.is(':checked')?(d.addClass('clever-mega-menu-active-edit-btn'),b.show(),g.show()):(d.removeClass('clever-mega-menu-active-edit-btn'),b.hide(),g.hide())})})});var cleverMenuEditor=function(a){var b=this,d=jQuery;b.item=a,b.tpl=d(d('#clever-mega-menu-popup-tpl').html()),b.navId=d('#update-nav-menu #menu').val(),b.menuId=d('input.menu-item-data-db-id',a).val(),b.settings=!1,'undefined'!=typeof cleverMenuItems[b.menuId]&&(b.settings=cleverMenuItems[b.menuId]),b.settings&&(''!==b.settings.options.icon&&d('.item-title',a).prepend('<span class="clever-mega-menu-item-icon"><i class="'+b.settings.options.icon+'"></i></span>'),1===b.settings.options.enable||'1'===b.settings.options.enable?a.addClass('clever-mega-menu-item-mega-enabled'):a.removeClass('clever-mega-menu-item-mega-enabled')),b.autoFrameHeight=function(){800>d(window).width()?d('body.rtl')[0]?b.tpl.css({right:'20px',top:d('#wpadminbar').height()+20+'px'}):tpl.css({left:'20px',top:d('#wpadminbar').height()+20+'px'}):d('body.rtl')[0]?b.tpl.css({right:d('#adminmenuback').width()+20+'px',top:d('#wpadminbar').height()+20+'px'}):b.tpl.css({left:d('#adminmenuback').width()+20+'px',top:d('#wpadminbar').height()+20+'px'}),d('.clever-mega-menu-popup').each(function(){var f=b.tpl.height();d('iframe',b.tpl).eq(0).height(f-30)})},b.setPopupTitle=function(){window.clever_mega_menu_item_title=d('.edit-menu-item-title',a).val()},b.hidePopup=function(){b.tpl.hide(),d('#clever-mega-menu-overlay').remove()},b.openPopup=function(){if(window.currentEditItem=b,0<d('iframe',b.tpl).length);else{var g;g=cleverMenuConfig.newCleverMenu+'&clever_menu_id='+b.navId+'&clever_menu_item_id='+b.menuId,b.tpl.append('<iframe id="clever-mega-menu-item-frame-'+b.menuId+'" src="'+g+'" class="clever-mega-menu-iframe"></iframe>')}b.frame=d('iframe',b.tpl).eq(0),b.tpl.attr('id','clever-mega-menu-menu-id-'+b.menuId),d('#clever-mega-menu-overlay').remove(),d('body').append('<div id="clever-mega-menu-overlay"></div>'),d('#clever-mega-menu-overlay').on('click',function(){return b.hidePopup(),!1}),d('body .clever-mega-menu-popup').hide(),b.setPopupTitle(),0<d('#clever-mega-menu-menu-id-'+b.menuId).length?b.autoFrameHeight():(b.autoFrameHeight(),d('body').append(b.tpl),b.autoFrameHeight(),d(window).resize(function(){b.autoFrameHeight()})),b.tpl.show()},d('.clever-mega-menu-item-edit-btn',a).on('click',function(){return b.openPopup(a),!1})},cleverMenuAddEditBtn=function(){enableCleverMenu=jQuery('#clever-mega-menu-enable-checkbox'),jQuery('li',wpNavMenu.menuList).each(function(){var a=jQuery(this),b=jQuery('.item-title',a),d='clever-mega-menu-item-edit-btn';enableCleverMenu.is(':checked')&&(d='clever-mega-menu-item-edit-btn clever-mega-menu-active-edit-btn'),0===jQuery('.clever-mega-menu-item-edit-btn',a).length&&(b.append('<span class="'+d+'"><i class="dashicons dashicons-admin-customizer"></i>'+cleverMenuI18n.editItem+'</span>'),new cleverMenuEditor(a))})};'undefined'!=typeof wpNavMenu&&(wpNavMenu.addItemToMenu=function(a,b,d){var f=jQuery,g=f('#menu').val(),j=f('#menu-settings-column-nonce').val(),k;b=b||function(){},d=d||function(){},k={action:'add-menu-item',menu:g,'menu-settings-column-nonce':j,'menu-item':a},f.post(ajaxurl,k,function(l){var m=f('#menu-instructions');l=f.trim(l),b(l,k),f('li.pending').hide().fadeIn('slow'),f('.drag-instructions').show(),!m.hasClass('menu-instructions-inactive')&&m.siblings().length&&m.addClass('menu-instructions-inactive'),cleverMenuAddEditBtn(f),d()})}),jQuery(document).ready(function(a){'undefined'!=typeof wpNavMenu&&cleverMenuAddEditBtn(),a('form#update-nav-menu').submit(function(){a('body .clever-mega-menu-popup').remove()})}),window.clever_menu_data_item_changes=function(a,b){window.currentEditItem.tpl.hide(),b.is_update||jQuery('iframe',window.currentEditItem.tpl).remove(),jQuery('#clever-mega-menu-overlay').remove(),cleverMenuItems[window.currentEditItem.menuId]={url:b.url,options:b.settings},window.currentEditItem.settings={url:b.url,options:b.settings},jQuery('.clever-mega-menu-item-icon',window.currentEditItem.item).remove(),''!==b.settings.icon&&jQuery('.item-title',window.currentEditItem.item).prepend('<span class="clever-mega-menu-item-icon"><i class="'+b.settings.icon+'"></i></span>'),1===b.settings.enable||'1'===b.settings.enable?window.currentEditItem.item.addClass('clever-mega-menu-item-mega-enabled'):window.currentEditItem.item.removeClass('clever-mega-menu-item-mega-enabled'),'undefined'!=typeof wpNavMenu&&(wpNavMenu.menusChanged=!1)};